#!/bin/bash

# Credits to and inspiration from https://github.com/gotbletu/dotfiles_v2/blob/master/normal_user/rofi/.config/rofi/launchers/rofi-bangs

name="$(basename $0)"
websearch="${name}-websearch"

declare -A COMMANDS

COMMANDS["web-search(tor)"]="BROWSER=torbrowser $websearch"
LABELS+=("web-search(tor)")
COMMANDS["web-search(default)"]="$websearch"
LABELS+=("web-search(default)")
COMMANDS["web-add-bookmark"]="${name}-bookmarks --add"
LABELS+=("web-add-bookmark")
COMMANDS["org-capture"]="org-capture"
LABELS+=("org-capture")
COMMANDS["snipshot"]="maim -s | xclip -selection clipboard -t image/png"
LABELS+=("snipshot")
COMMANDS["system-kill"]="${name}-kill"
LABELS+=("system-kill")
COMMANDS["system-reboot"]="confirm 'Reboot' && systemctl reboot"
LABELS+=("system-reboot")
COMMANDS["system-shutdown"]="confirm 'Shutdown' && systemctl poweroff"
LABELS+=("system-shutdown")
COMMANDS["help"]="sxhkd-help"
LABELS+=("help")

menu() {
  # a regular array 'LABELS' is used for conserving custom order
  for key in ${LABELS[@]}; do echo $key; done
}

choice=$(menu | dmenu -l 3 -g 3 -p "$name: ")

confirm () {
  confirm="$(printf "Yes\nNo" | dmenu -p "${1}?")"
  [ "$confirm" = "Yes" ] || exit 0
}

[[ -z ${choice} ]] && exit
[[ ${COMMANDS[$choice]+isset} ]] && eval ${COMMANDS[$choice]} >> /dev/null
