#!/bin/bash

# Credits to and inspiration from https://github.com/gotbletu/dotfiles_v2/blob/master/normal_user/rofi/.config/rofi/launchers/rofi-bangs

name="$(basename $0)"
websearch="${name}-websearch"

declare -A COMMANDS

COMMANDS["websearch(tor)"]="BROWSER=torbrowser $websearch"
LABELS+=("websearch(tor)")
COMMANDS["websearch(default)"]="$websearch"
LABELS+=("websearch(default)")
COMMANDS["add-bookmark"]="${name}-bookmarks --add"
LABELS+=("add-bookmark")
COMMANDS["snipshot"]="maim -s | xclip -selection clipboard -t image/png"
LABELS+=("snipshot")
COMMANDS["kill"]="${name}-kill"
LABELS+=("kill")
COMMANDS["reboot"]="confirm 'Reboot' && systemctl reboot"
LABELS+=("reboot")
COMMANDS["shutdown"]="confirm 'Shutdown' && systemctl poweroff"
LABELS+=("shutdown")
COMMANDS["help"]="sxhkd-help"
LABELS+=("help")

menu() {
  # a regular array 'LABELS' is used for conserving custom order
  for key in ${LABELS[@]}; do echo $key; done
}

choice=$(menu | dmenu -l 3 -g 3 -p "$name: ")

confirm () {
  confirm="$(printf "No\nYes" | dmenu -p "${1}?")"
  [ "$confirm" = "Yes" ] || exit 0
}

[[ -z ${choice} ]] && exit
[[ ${COMMANDS[$choice]+isset} ]] && eval ${COMMANDS[$choice]} >> /dev/null
